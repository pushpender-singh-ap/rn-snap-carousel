{"version":3,"names":["React","Animated","I18nManager","Platform","View","shallowCompare","defaultScrollInterpolator","stackScrollInterpolator","tinderScrollInterpolator","defaultAnimatedStyles","shiftAnimatedStyles","stackAnimatedStyles","tinderAnimatedStyles","IS_ANDROID","OS","IS_RTL","isRTL","Carousel","Component","constructor","props","state","hideCarousel","apparitionDelay","interpolators","initialActiveItem","_getFirstItem","firstItem","_activeItem","_onScrollActiveItem","_previousFirstItem","_previousItemsLength","_mounted","_positions","_currentScrollOffset","_scrollEnabled","scrollEnabled","_getCellRendererComponent","bind","_getItemLayout","_getKeyExtractor","_onLayout","_onScroll","_onMomentumScrollEnd","_onTouchStart","_onTouchEnd","_renderItem","_setScrollHandler","_displayWarnings","componentDidMount","autoplay","_initPositionsAndInterpolators","_initTimeout","setTimeout","apparitionCallback","setState","startAutoplay","_needsScrollView","_firstItem","_snapToItem","_apparitionTimeout","shouldComponentUpdate","nextProps","nextState","shouldOptimizeUpdates","componentDidUpdate","prevProps","itemsLength","_getCustomDataLength","nextFirstItem","nextActiveItem","hasNewSize","vertical","itemHeight","sliderHeight","itemWidth","sliderWidth","_setScrollEnabled","length","_hackActiveSlideAnimation","onScroll","componentWillUnmount","stopAutoplay","clearTimeout","_hackSlideAnimationTimeout","_enableAutoplayTimeout","_autoplayTimeout","_snapNoMomentumTimeout","_androidRepositioningTimeout","realIndex","currentIndex","_getDataIndex","currentScrollPosition","scrollEventConfig","listener","useNativeDriver","_scrollPos","Value","argMapping","nativeEvent","contentOffset","y","x","Array","isArray","_argMapping","pop","argMap","push","_onScrollHandler","event","pluginName","removedProps","console","error","forEach","removedProp","warn","useScrollView","FlatList","_shouldUseStackLayout","_shouldUseTinderLayout","_needsRTLAdaptations","_enableLoop","data","enableSnap","loop","_shouldAnimateSlides","inactiveSlideOpacity","inactiveSlideScale","scrollInterpolator","slideInterpolatedStyle","_shouldUseShiftLayout","inactiveSlideShift","layout","_shouldRepositionScroll","index","loopClonesPerSide","dataLength","_roundNumber","num","decimals","rounder","Math","pow","round","Number","EPSILON","_isMultiple","_getCustomData","previousItems","nextItems","dataMultiplier","floor","remainder","i","unshift","slice","concat","_getCustomIndex","baseDataIndexes","dataIndexes","j","_getPositionIndex","_getSnapOffsets","offset","_getItemMainDimension","map","_","_getWrappedRef","_carouselRef","scrollTo","scrollToOffset","getNode","_getScrollEnabled","wrappedRef","setNativeProps","_getItemScrollOffset","start","itemMainDimension","children","style","cellStyle","zIndex","_getScrollOffset","_getContainerInnerMargin","opposite","activeSlideAlignment","_getActiveSlideOffset","activeSlideOffset","minOffset","_getActiveItem","center","lastIndex","itemIndex","end","_getSlideInterpolatedStyle","animatedValue","layoutCardOffset","_itemData","_index","interpolator","inputRange","outputRange","interpolate","extrapolate","scrollValue","multiplier","scrollDelta","_scrollTo","animated","_repositionScroll","repositionTo","options","onTouchStart","_autoplaying","pauseAutoPlay","onTouchEnd","_autoplay","onScrollIndexChanged","scrollOffset","autoplayDelay","onMomentumScrollEnd","onSnapToItem","hasSnapped","onLayout","_onLayoutInitDone","fireCallback","forceScrollTo","undefined","requiresManualTrigger","autoplayInterval","_autoplayInterval","setInterval","snapToNext","clearInterval","snapToItem","positionIndex","newIndex","snapToPrev","triggerRenderingHack","item","keyExtractor","slideStyle","animate","animatedStyle","dataIndex","mainDimension","height","width","specificProps","key","renderItem","scrollPosition","carouselRef","_getComponentOverridableProps","visibleItems","ceil","initialNumPerSide","initialNumToRender","maxToRenderPerBatch","windowSize","automaticallyAdjustContentInsets","decelerationRate","directionalLockEnabled","disableScrollViewPanResponder","inverted","overScrollMode","pinchGestureEnabled","pointerEvents","scrollsToTop","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","_isAllowCrossItem","pagingEnabled","_getComponentStaticProps","CellRendererComponent","containerCustomStyle","contentContainerCustomStyle","getItemLayout","useExperimentalSnap","containerStyle","opacity","flexDirection","innerMarginStyle","paddingTop","paddingBottom","paddingLeft","paddingRight","contentContainerStyle","snapProps","snapToAlignment","snapToInterval","snapToOffsets","initialScrollIndex","numColumns","horizontal","scrollEventThrottle","render","ScrollViewComponent","ScrollView","c","callbackOffsetMargin","hasParallaxImages"],"sources":["Carousel.tsx"],"sourcesContent":["import React, { PropsWithChildren } from 'react';\nimport {\n    Animated,\n    FlatList,\n    I18nManager,\n    Platform,\n    ScrollView,\n    View,\n    StyleProp,\n    NativeSyntheticEvent,\n    NativeScrollEvent,\n    LayoutChangeEvent,\n    GestureResponderEvent,\n    ViewStyle,\n    FlatListProps,\n    ScrollViewProps,\n} from 'react-native';\nimport shallowCompare from 'react-addons-shallow-compare';\nimport {\n    defaultScrollInterpolator,\n    stackScrollInterpolator,\n    tinderScrollInterpolator,\n    defaultAnimatedStyles,\n    shiftAnimatedStyles,\n    stackAnimatedStyles,\n    tinderAnimatedStyles\n} from '../utils/animations';\nimport type { CarouselProps, CarouselState } from './types';\n\n// Metro doesn't support dynamic imports - i.e. require() done in the component itself\n// But at the same time the following import will fail on Snack...\n// TODO: find a way to get React Native's version without having to assume the file path\n// import RN_PACKAGE from '../../../react-native/package.json';\n\nconst IS_ANDROID = Platform.OS === 'android';\n\n// React Native automatically handles RTL layouts; unfortunately, it's buggy with horizontal ScrollView\n// See https://github.com/facebook/react-native/issues/11960\n// NOTE: the following variable is not declared in the constructor\n// otherwise it is undefined at init, which messes with custom indexes\nconst IS_RTL = I18nManager.isRTL;\n\nexport class Carousel<TData> extends React.Component<\n    CarouselProps<TData>,\n    CarouselState\n> {\n    static defaultProps = {\n        activeSlideAlignment: 'center',\n        activeSlideOffset: 20,\n        apparitionDelay: 0,\n        autoplay: false,\n        autoplayDelay: 1000,\n        autoplayInterval: 3000,\n        callbackOffsetMargin: 5,\n        containerCustomStyle: {},\n        contentContainerCustomStyle: {},\n        enableSnap: true,\n        firstItem: 0,\n        hasParallaxImages: false,\n        inactiveSlideOpacity: 0.7,\n        inactiveSlideScale: 0.9,\n        inactiveSlideShift: 0,\n        layout: 'default',\n        loop: false,\n        loopClonesPerSide: 3,\n        scrollEnabled: true,\n        slideStyle: {},\n        shouldOptimizeUpdates: true,\n        useExperimentalSnap: false,\n        pagingEnabled: false,\n        useScrollView: !Animated.FlatList\n    };\n\n    _activeItem: number;\n    _onScrollActiveItem: number;\n    _previousFirstItem: number;\n    _previousItemsLength: number;\n    _mounted: boolean;\n    _positions: { start: number; end: number }[];\n    _currentScrollOffset: number;\n    _scrollEnabled: boolean;\n\n    _initTimeout?: ReturnType<typeof setTimeout>;\n    _apparitionTimeout?: ReturnType<typeof setTimeout>;\n    _hackSlideAnimationTimeout?: ReturnType<typeof setTimeout>;\n    _enableAutoplayTimeout?: ReturnType<typeof setTimeout>;\n    _autoplayTimeout?: ReturnType<typeof setTimeout>;\n    _snapNoMomentumTimeout?: ReturnType<typeof setTimeout>;\n    _androidRepositioningTimeout?: ReturnType<typeof setTimeout>;\n    _autoplayInterval?: ReturnType<typeof setInterval>;\n\n    _scrollPos?: Animated.Value;\n\n    _onScrollHandler?: ReturnType<typeof Animated.event>;\n\n    _carouselRef: ScrollView | FlatList<TData> | null = null;\n\n    _autoplaying?: boolean;\n    _autoplay?: boolean;\n\n    _onLayoutInitDone?: boolean;\n\n    constructor(props: CarouselProps<TData>) {\n        super(props);\n\n        this.state = {\n            hideCarousel: !!props.apparitionDelay,\n            interpolators: []\n        };\n\n        // this._RNVersionCode = this._getRNVersionCode();\n\n        // The following values are not stored in the state because 'setState()' is asynchronous\n        // and this results in an absolutely crappy behavior on Android while swiping (see #156)\n        const initialActiveItem = this._getFirstItem(props.firstItem);\n        this._activeItem = initialActiveItem;\n        this._onScrollActiveItem = initialActiveItem;\n        this._previousFirstItem = initialActiveItem;\n        this._previousItemsLength = initialActiveItem;\n\n        this._mounted = false;\n        this._positions = [];\n        this._currentScrollOffset = 0; // Store ScrollView's scroll position\n        this._scrollEnabled = props.scrollEnabled !== false;\n\n        this._getCellRendererComponent = this._getCellRendererComponent.bind(this);\n        this._getItemLayout = this._getItemLayout.bind(this);\n        this._getKeyExtractor = this._getKeyExtractor.bind(this);\n        this._onLayout = this._onLayout.bind(this);\n        this._onScroll = this._onScroll.bind(this);\n        this._onMomentumScrollEnd = this._onMomentumScrollEnd.bind(this);\n        this._onTouchStart = this._onTouchStart.bind(this);\n        this._onTouchEnd = this._onTouchEnd.bind(this);\n        this._renderItem = this._renderItem.bind(this);\n\n        // WARNING: call this AFTER binding _onScroll\n        this._setScrollHandler(props);\n\n        // Display warnings\n        this._displayWarnings(props);\n    }\n\n    componentDidMount() {\n        const { apparitionDelay, autoplay, firstItem } = this.props;\n\n        this._mounted = true;\n        this._initPositionsAndInterpolators();\n\n        // Without 'requestAnimationFrame' or a `0` timeout, images will randomly not be rendered on Android...\n        this._initTimeout = setTimeout(() => {\n            if (!this._mounted) {\n                return;\n            }\n\n            const apparitionCallback = () => {\n                if (apparitionDelay) {\n                    this.setState({ hideCarousel: false });\n                }\n                if (autoplay) {\n                    this.startAutoplay();\n                }\n            };\n\n            // FlatList will use its own built-in prop `initialScrollIndex`\n            if (this._needsScrollView()) {\n                const _firstItem = this._getFirstItem(firstItem);\n                this._snapToItem(_firstItem, false, false, true);\n                // this._hackActiveSlideAnimation(_firstItem);\n            }\n\n            if (apparitionDelay) {\n                this._apparitionTimeout = setTimeout(() => {\n                    apparitionCallback();\n                }, apparitionDelay);\n            } else {\n                apparitionCallback();\n            }\n        }, 1);\n    }\n\n    shouldComponentUpdate(\n        nextProps: CarouselProps<TData>,\n        nextState: CarouselState\n    ): boolean {\n        if (this.props.shouldOptimizeUpdates === false) {\n            return true;\n        } else {\n            return shallowCompare(this, nextProps, nextState);\n        }\n    }\n\n    componentDidUpdate(prevProps: CarouselProps<TData>) {\n        const { interpolators } = this.state;\n        const {\n            firstItem,\n            scrollEnabled\n        } = this.props;\n        const itemsLength = this._getCustomDataLength(this.props);\n\n        if (!itemsLength) {\n            return;\n        }\n\n        const nextFirstItem = this._getFirstItem(firstItem, this.props);\n        let nextActiveItem =\n            typeof this._activeItem !== 'undefined' ?\n                this._activeItem :\n                nextFirstItem;\n\n        const hasNewSize = this.props.vertical !== prevProps.vertical ||\n            (\n                this.props.vertical && prevProps.vertical && (\n                    prevProps.itemHeight !== this.props.itemHeight || prevProps.sliderHeight !== this.props.sliderHeight\n                )\n            ) || (\n                !this.props.vertical && !prevProps.vertical && (\n                    prevProps.itemWidth !== this.props.itemWidth || prevProps.sliderWidth !== this.props.sliderWidth\n                )\n            );\n\n        // Prevent issues with dynamically removed items\n        if (nextActiveItem > itemsLength - 1) {\n            nextActiveItem = itemsLength - 1;\n        }\n\n        // Handle changing scrollEnabled independent of user -> carousel interaction\n        if (scrollEnabled !== prevProps.scrollEnabled) {\n            this._setScrollEnabled(scrollEnabled);\n        }\n\n        if (\n            interpolators.length !== itemsLength ||\n            hasNewSize\n        ) {\n            this._activeItem = nextActiveItem;\n            this._previousItemsLength = itemsLength;\n\n            this._initPositionsAndInterpolators(this.props);\n\n            // Handle scroll issue when dynamically removing items (see #133)\n            // This also fixes first item's active state on Android\n            // Because 'initialScrollIndex' apparently doesn't trigger scroll\n            if (this._previousItemsLength > itemsLength) {\n                this._hackActiveSlideAnimation(nextActiveItem);\n            }\n\n            if (hasNewSize) {\n                this._snapToItem(nextActiveItem, false, false, true);\n            }\n        } else if (\n            nextFirstItem !== this._previousFirstItem &&\n            nextFirstItem !== this._activeItem\n        ) {\n            this._activeItem = nextFirstItem;\n            this._previousFirstItem = nextFirstItem;\n            this._snapToItem(nextFirstItem, false, true, true);\n        }\n\n        if (this.props.onScroll !== prevProps.onScroll) {\n            this._setScrollHandler(this.props);\n        }\n    }\n\n    componentWillUnmount() {\n        this._mounted = false;\n        this.stopAutoplay();\n        clearTimeout(this._initTimeout);\n        clearTimeout(this._apparitionTimeout);\n        clearTimeout(this._hackSlideAnimationTimeout);\n        clearTimeout(this._enableAutoplayTimeout);\n        clearTimeout(this._autoplayTimeout);\n        clearTimeout(this._snapNoMomentumTimeout);\n        clearTimeout(this._androidRepositioningTimeout);\n    }\n\n    get realIndex() {\n        return this._activeItem;\n    }\n\n    get currentIndex() {\n        return this._getDataIndex(this._activeItem);\n    }\n\n    get currentScrollPosition() {\n        return this._currentScrollOffset;\n    }\n\n    _setScrollHandler(props: CarouselProps<TData>) {\n        // Native driver for scroll events\n        const scrollEventConfig = {\n            listener: this._onScroll,\n            useNativeDriver: true\n        };\n        this._scrollPos = new Animated.Value(0);\n        const argMapping = props.vertical ?\n            [{ nativeEvent: { contentOffset: { y: this._scrollPos } } }] :\n            [{ nativeEvent: { contentOffset: { x: this._scrollPos } } }];\n\n        // @ts-expect-error Let's ignore for now that trick\n        if (props.onScroll && Array.isArray(props.onScroll._argMapping)) {\n            // Because of a react-native issue https://github.com/facebook/react-native/issues/13294\n            argMapping.pop();\n            // @ts-expect-error Let's ignore for now that trick\n            const [argMap] = props.onScroll._argMapping;\n            if (argMap && argMap.nativeEvent && argMap.nativeEvent.contentOffset) {\n                // Shares the same animated value passed in props\n                this._scrollPos =\n                    argMap.nativeEvent.contentOffset.x ||\n                    argMap.nativeEvent.contentOffset.y ||\n                    this._scrollPos;\n            }\n            // @ts-expect-error Let's ignore for now that trick\n            argMapping.push(...props.onScroll._argMapping);\n        }\n        this._onScrollHandler = Animated.event<NativeScrollEvent>(\n            argMapping,\n            scrollEventConfig\n        );\n    }\n\n    // This will return a future-proof version code number compatible with semantic versioning\n    // Examples: 0.59.3 -> 5903 / 0.61.4 -> 6104 / 0.62.12 -> 6212 / 1.0.2 -> 10002\n    // _getRNVersionCode () {\n    //     const version = RN_PACKAGE && RN_PACKAGE.version;\n    //     if (!version) {\n    //         return null;\n    //     }\n    //     const versionSplit = version.split('.');\n    //     if (!versionSplit || !versionSplit.length) {\n    //         return null;\n    //     }\n    //     return versionSplit[0] * 10000 +\n    //         (typeof versionSplit[1] !== 'undefined' ? versionSplit[1] * 100 : 0) +\n    //         (typeof versionSplit[2] !== 'undefined' ? versionSplit[2] * 1 : 0);\n    // }\n\n    _displayWarnings(props: CarouselProps<TData> = this.props) {\n        const pluginName = 'rn-snap-carousel';\n        const removedProps = [\n            'activeAnimationType',\n            'activeAnimationOptions',\n            'enableMomentum',\n            'lockScrollTimeoutDuration',\n            'lockScrollWhileSnapping',\n            'onBeforeSnapToItem',\n            'swipeThreshold'\n        ] as const;\n\n        // if (this._RNVersionCode && this._RNVersionCode < 5800) {\n        //     console.error(\n        //         `${pluginName}: Version 4+ of the plugin is based on React Native props that were introduced in version 0.58. ` +\n        //         'Please downgrade to version 3.x or update your version of React Native.'\n        //     );\n        // }\n        if (!props.vertical && (!props.sliderWidth || !props.itemWidth)) {\n            console.error(\n                `${pluginName}: You need to specify both 'sliderWidth' and 'itemWidth' for horizontal carousels`\n            );\n        }\n        if (props.vertical && (!props.sliderHeight || !props.itemHeight)) {\n            console.error(\n                `${pluginName}: You need to specify both 'sliderHeight' and 'itemHeight' for vertical carousels`\n            );\n        }\n\n        removedProps.forEach((removedProp) => {\n            if (removedProp in props) {\n                console.warn(\n                    `${pluginName}: Prop ${removedProp} has been removed in version 4 of the plugin`\n                );\n            }\n        });\n    }\n\n    _needsScrollView() {\n        const { useScrollView } = this.props;\n        // Android's cell renderer is buggy and has a stange overflow\n        // TODO: a workaround might be to pass the custom animated styles directly to it\n        return IS_ANDROID ?\n            useScrollView ||\n            !Animated.FlatList ||\n            this._shouldUseStackLayout() ||\n            this._shouldUseTinderLayout() :\n            useScrollView || !Animated.FlatList;\n    }\n\n    _needsRTLAdaptations() {\n        const { vertical } = this.props;\n        return IS_RTL && IS_ANDROID && !vertical;\n    }\n\n    _enableLoop() {\n        const { data, enableSnap, loop } = this.props;\n        return enableSnap && loop && data && data.length && data.length > 1;\n    }\n\n    _shouldAnimateSlides(props: CarouselProps<TData> = this.props) {\n        const {\n            inactiveSlideOpacity,\n            inactiveSlideScale,\n            scrollInterpolator,\n            slideInterpolatedStyle\n        } = props;\n        return (\n            inactiveSlideOpacity < 1 ||\n            inactiveSlideScale < 1 ||\n            !!scrollInterpolator ||\n            !!slideInterpolatedStyle ||\n            this._shouldUseShiftLayout() ||\n            this._shouldUseStackLayout() ||\n            this._shouldUseTinderLayout()\n        );\n    }\n\n    _shouldUseShiftLayout() {\n        const { inactiveSlideShift, layout } = this.props;\n        return layout === 'default' && inactiveSlideShift !== 0;\n    }\n\n    _shouldUseStackLayout() {\n        return this.props.layout === 'stack';\n    }\n\n    _shouldUseTinderLayout() {\n        return this.props.layout === 'tinder';\n    }\n\n    _shouldRepositionScroll(index: number) {\n        const { data, enableSnap, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n        if (\n            !enableSnap ||\n            !dataLength ||\n            !this._enableLoop() ||\n            (index >= loopClonesPerSide && index < dataLength + loopClonesPerSide)\n        ) {\n            return false;\n        }\n        return true;\n    }\n\n    _roundNumber(num: number, decimals = 1) {\n        // https://stackoverflow.com/a/41716722/\n        const rounder = Math.pow(10, decimals);\n        return Math.round((num + Number.EPSILON) * rounder) / rounder;\n    }\n\n    _isMultiple(x: number, y: number) {\n        // This prevents Javascript precision issues: https://stackoverflow.com/a/58440614/\n        // Required because Android viewport size can return pretty complicated decimals numbers\n        return Math.round(Math.round(x / y) / (1 / y)) === Math.round(x);\n    }\n\n    _getCustomData(props: CarouselProps<TData> = this.props) {\n        const { data, loopClonesPerSide } = props;\n        const dataLength = data && data.length;\n\n        if (!dataLength) {\n            return [];\n        }\n\n        if (!this._enableLoop()) {\n            return data;\n        }\n\n        let previousItems = [];\n        let nextItems = [];\n\n        if (loopClonesPerSide > dataLength) {\n            const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n            const remainder = loopClonesPerSide % dataLength;\n\n            for (let i = 0; i < dataMultiplier; i++) {\n                previousItems.push(...data);\n                nextItems.push(...data);\n            }\n\n            previousItems.unshift(...data.slice(-remainder));\n            nextItems.push(...data.slice(0, remainder));\n        } else {\n            previousItems = data.slice(-loopClonesPerSide);\n            nextItems = data.slice(0, loopClonesPerSide);\n        }\n\n        return previousItems.concat(data, nextItems);\n    }\n\n    _getCustomDataLength(props: CarouselProps<TData> = this.props) {\n        const { data, loopClonesPerSide } = props;\n        const dataLength = data && data.length;\n\n        if (!dataLength) {\n            return 0;\n        }\n\n        return this._enableLoop() ? dataLength + 2 * loopClonesPerSide : dataLength;\n    }\n\n    _getCustomIndex(index: number, props: CarouselProps<TData> = this.props) {\n        const itemsLength = this._getCustomDataLength(props);\n\n        if (!itemsLength || typeof index === 'undefined') {\n            return 0;\n        }\n\n        return this._needsRTLAdaptations() ? itemsLength - index - 1 : index;\n    }\n\n    _getDataIndex(index: number) {\n        const { data, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n\n        if (!this._enableLoop() || !dataLength) {\n            return index;\n        }\n\n        if (index >= dataLength + loopClonesPerSide) {\n            return loopClonesPerSide > dataLength ?\n                (index - loopClonesPerSide) % dataLength :\n                index - dataLength - loopClonesPerSide;\n        } else if (index < loopClonesPerSide) {\n            // TODO: is there a simpler way of determining the interpolated index?\n            if (loopClonesPerSide > dataLength) {\n                const baseDataIndexes = [];\n                const dataIndexes = [];\n                const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n                const remainder = loopClonesPerSide % dataLength;\n\n                for (let i = 0; i < dataLength; i++) {\n                    baseDataIndexes.push(i);\n                }\n\n                for (let j = 0; j < dataMultiplier; j++) {\n                    dataIndexes.push(...baseDataIndexes);\n                }\n\n                dataIndexes.unshift(...baseDataIndexes.slice(-remainder));\n                return dataIndexes[index];\n            } else {\n                return index + dataLength - loopClonesPerSide;\n            }\n        } else {\n            return index - loopClonesPerSide;\n        }\n    }\n\n    // Used with `snapToItem()` and 'PaginationDot'\n    _getPositionIndex(index: number) {\n        const { loop, loopClonesPerSide } = this.props;\n        return loop ? index + loopClonesPerSide : index;\n    }\n\n    _getSnapOffsets(props: CarouselProps<TData> = this.props) {\n        const offset = this._getItemMainDimension();\n        return [...Array(this._getCustomDataLength(props))].map((_, i) => {\n            return i * offset;\n        });\n    }\n\n    _getFirstItem(index: number, props: CarouselProps<TData> = this.props) {\n        const { loopClonesPerSide } = props;\n        const itemsLength = this._getCustomDataLength(props);\n\n        if (!itemsLength || index > itemsLength - 1 || index < 0) {\n            return 0;\n        }\n\n        return this._enableLoop() ? index + loopClonesPerSide : index;\n    }\n\n    _getWrappedRef() {\n        // Starting with RN 0.62, we should no longer call `getNode()` on the ref of an Animated component\n        if (\n            this._carouselRef &&\n            ((this._needsScrollView() &&\n                (this._carouselRef as ScrollView).scrollTo) ||\n                (!this._needsScrollView() &&\n                    (this._carouselRef as FlatList).scrollToOffset))\n        ) {\n            return this._carouselRef;\n        }\n        // https://github.com/facebook/react-native/issues/10635\n        // https://stackoverflow.com/a/48786374/8412141\n        return (\n            this._carouselRef &&\n            // @ts-expect-error This is for before 0.62\n            this._carouselRef.getNode &&\n            // @ts-expect-error This is for before 0.62\n            this._carouselRef.getNode()\n        );\n    }\n\n    _getScrollEnabled() {\n        return this._scrollEnabled;\n    }\n\n    _setScrollEnabled(scrollEnabled = true) {\n        const wrappedRef = this._getWrappedRef();\n\n        if (!wrappedRef || !wrappedRef.setNativeProps) {\n            return;\n        }\n\n        // 'setNativeProps()' is used instead of 'setState()' because the latter\n        // really takes a toll on Android behavior when momentum is disabled\n        wrappedRef.setNativeProps({ scrollEnabled });\n        this._scrollEnabled = scrollEnabled;\n    }\n\n    _getItemMainDimension() {\n        return this.props.vertical ? this.props.itemHeight : this.props.itemWidth;\n    }\n\n    _getItemScrollOffset(index: number) {\n        return (\n            this._positions && this._positions[index] && this._positions[index].start\n        );\n    }\n\n    _getItemLayout(_: TData[], index: number) {\n        const itemMainDimension = this._getItemMainDimension();\n        return {\n            index,\n            length: itemMainDimension,\n            offset: itemMainDimension * index // + this._getContainerInnerMargin()\n        };\n    }\n\n    // This will allow us to have a proper zIndex even with a FlatList\n    // https://github.com/facebook/react-native/issues/18616#issuecomment-389444165\n    _getCellRendererComponent({\n        children,\n        index,\n        style,\n        ...props\n    }: PropsWithChildren<{ index: number; style: StyleProp<ViewStyle> }>) {\n        const cellStyle = [\n            style,\n            !IS_ANDROID ? { zIndex: this._getCustomDataLength() - index } : {}\n        ];\n\n        return (\n            <View style={cellStyle} key={index} {...props}>\n                {children}\n            </View>\n        );\n    }\n\n    _getKeyExtractor(_: TData, index: number) {\n        return this._needsScrollView() ?\n            `scrollview-item-${index}` :\n            `flatlist-item-${index}`;\n    }\n\n    _getScrollOffset(event: NativeSyntheticEvent<NativeScrollEvent>) {\n        const { vertical } = this.props;\n        return (\n            (event &&\n                event.nativeEvent &&\n                event.nativeEvent.contentOffset &&\n                event.nativeEvent.contentOffset[vertical ? 'y' : 'x']) ||\n            0\n        );\n    }\n\n    _getContainerInnerMargin(opposite = false) {\n        const { activeSlideAlignment } = this.props;\n\n        if (\n            (activeSlideAlignment === 'start' && !opposite) ||\n            (activeSlideAlignment === 'end' && opposite)\n        ) {\n            return 0;\n        } else if (\n            (activeSlideAlignment === 'end' && !opposite) ||\n            (activeSlideAlignment === 'start' && opposite)\n        ) {\n            return this.props.vertical ?\n                this.props.sliderHeight - this.props.itemHeight :\n                this.props.sliderWidth - this.props.itemWidth;\n        } else {\n            return this.props.vertical ?\n                (this.props.sliderHeight - this.props.itemHeight) / 2 :\n                (this.props.sliderWidth - this.props.itemWidth) / 2;\n        }\n    }\n\n    _getActiveSlideOffset() {\n        const { activeSlideOffset } = this.props;\n        const itemMainDimension = this._getItemMainDimension();\n        const minOffset = 10;\n        // Make sure activeSlideOffset never prevents the active area from being at least 10 px wide\n        return itemMainDimension / 2 - activeSlideOffset >= minOffset ?\n            activeSlideOffset :\n            minOffset;\n    }\n\n    _getActiveItem(offset: number) {\n        const itemMainDimension = this._getItemMainDimension();\n        const center = offset + itemMainDimension / 2;\n        const activeSlideOffset = this._getActiveSlideOffset();\n        const lastIndex = this._positions.length - 1;\n        let itemIndex;\n\n        if (offset <= 0) {\n            return 0;\n        }\n\n        if (\n            this._positions[lastIndex] &&\n            offset >= this._positions[lastIndex].start\n        ) {\n            return lastIndex;\n        }\n\n        for (let i = 0; i < this._positions.length; i++) {\n            const { start, end } = this._positions[i];\n            if (\n                center + activeSlideOffset >= start &&\n                center - activeSlideOffset <= end\n            ) {\n                itemIndex = i;\n                break;\n            }\n        }\n\n        return itemIndex || 0;\n    }\n\n    _getSlideInterpolatedStyle(index: number, animatedValue: Animated.AnimatedInterpolation) {\n        const { layoutCardOffset, slideInterpolatedStyle } = this.props;\n\n        if (slideInterpolatedStyle) {\n            return slideInterpolatedStyle(index, animatedValue, this.props);\n        } else if (this._shouldUseTinderLayout()) {\n            return tinderAnimatedStyles(\n                index,\n                animatedValue,\n                this.props,\n                layoutCardOffset\n            );\n        } else if (this._shouldUseStackLayout()) {\n            return stackAnimatedStyles(\n                index,\n                animatedValue,\n                this.props,\n                layoutCardOffset\n            );\n        } else if (this._shouldUseShiftLayout()) {\n            return shiftAnimatedStyles(index, animatedValue, this.props);\n        } else {\n            return defaultAnimatedStyles(index, animatedValue, this.props);\n        }\n    }\n\n    _initPositionsAndInterpolators(props: CarouselProps<TData> = this.props) {\n        const { data, scrollInterpolator } = props;\n        const itemMainDimension = this._getItemMainDimension();\n\n        if (!data || !data.length) {\n            return;\n        }\n\n        const interpolators: Animated.AnimatedInterpolation[] = [];\n        this._positions = [];\n\n        this._getCustomData(props).forEach((_itemData, index) => {\n            const _index = this._getCustomIndex(index, props);\n            let animatedValue: Animated.AnimatedInterpolation;\n\n            this._positions[index] = {\n                start: index * itemMainDimension,\n                end: index * itemMainDimension + itemMainDimension\n            };\n\n            if (!this._shouldAnimateSlides(props) || !this._scrollPos) {\n                animatedValue = new Animated.Value(1);\n            } else {\n                let interpolator;\n\n                if (scrollInterpolator) {\n                    interpolator = scrollInterpolator(_index, props);\n                } else if (this._shouldUseStackLayout()) {\n                    interpolator = stackScrollInterpolator(_index, props);\n                } else if (this._shouldUseTinderLayout()) {\n                    interpolator = tinderScrollInterpolator(_index, props);\n                }\n\n                if (\n                    !interpolator ||\n                    !interpolator.inputRange ||\n                    !interpolator.outputRange\n                ) {\n                    interpolator = defaultScrollInterpolator(_index, props);\n                }\n\n                animatedValue = this._scrollPos.interpolate({\n                    ...interpolator,\n                    extrapolate: 'clamp'\n                });\n            }\n\n            interpolators.push(animatedValue);\n        });\n\n        this.setState({ interpolators });\n    }\n\n    _hackActiveSlideAnimation(index: number, scrollValue = 1) {\n        const offset = this._getItemScrollOffset(index);\n\n        if (!this._mounted || !this._carouselRef || typeof offset === 'undefined') {\n            return;\n        }\n\n        const multiplier = this._currentScrollOffset === 0 ? 1 : -1;\n        const scrollDelta = scrollValue * multiplier;\n\n        this._scrollTo({ offset: offset + scrollDelta, animated: false });\n\n        clearTimeout(this._hackSlideAnimationTimeout);\n        this._hackSlideAnimationTimeout = setTimeout(() => {\n            this._scrollTo({ offset, animated: false });\n        }, 1); // works randomly when set to '0'\n    }\n\n    _repositionScroll(index: number, animated = false) {\n        const { data, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n\n        if (typeof index === 'undefined' || !this._shouldRepositionScroll(index)) {\n            return;\n        }\n\n        let repositionTo = index;\n\n        if (index >= dataLength + loopClonesPerSide) {\n            repositionTo = index - dataLength;\n        } else if (index < loopClonesPerSide) {\n            repositionTo = index + dataLength;\n        }\n\n        this._snapToItem(repositionTo, animated, false);\n    }\n\n    _scrollTo({\n        offset,\n        index,\n        animated = true\n    }: {\n        offset: number;\n        index?: number;\n        animated: boolean;\n    }) {\n        const { vertical } = this.props;\n        const wrappedRef = this._getWrappedRef();\n        if (\n            !this._mounted ||\n            !wrappedRef ||\n            (typeof offset === 'undefined' && typeof index === 'undefined')\n        ) {\n            return;\n        }\n\n        let scrollToOffset;\n        if (typeof index !== 'undefined') {\n            scrollToOffset = this._getItemScrollOffset(index);\n        } else {\n            scrollToOffset = offset;\n        }\n\n        if (typeof scrollToOffset === 'undefined') {\n            return;\n        }\n\n        const options = this._needsScrollView() ?\n            {\n                x: vertical ? 0 : offset,\n                y: vertical ? offset : 0,\n                animated\n            } :\n            {\n                offset,\n                animated\n            };\n\n        if (this._needsScrollView()) {\n            wrappedRef.scrollTo(options);\n        } else {\n            wrappedRef.scrollToOffset(options);\n        }\n    }\n\n    _onTouchStart(event: GestureResponderEvent) {\n        const { onTouchStart } = this.props;\n\n        // `onTouchStart` is fired even when `scrollEnabled` is set to `false`\n        if (this._getScrollEnabled() !== false && this._autoplaying) {\n            this.pauseAutoPlay();\n        }\n\n        onTouchStart && onTouchStart(event);\n    }\n\n    _onTouchEnd(event: GestureResponderEvent) {\n        const { onTouchEnd } = this.props;\n\n        if (\n            this._getScrollEnabled() !== false &&\n            this._autoplay &&\n            !this._autoplaying\n        ) {\n            // This event is buggy on Android, so a fallback is provided in _onMomentumScrollEnd()\n            this.startAutoplay();\n        }\n\n        onTouchEnd && onTouchEnd(event);\n    }\n\n    _onScroll(event: NativeSyntheticEvent<NativeScrollEvent>) {\n        const { onScroll, onScrollIndexChanged } = this.props;\n        const scrollOffset = event ?\n            this._getScrollOffset(event) :\n            this._currentScrollOffset;\n        const nextActiveItem = this._getActiveItem(scrollOffset);\n\n        this._currentScrollOffset = scrollOffset;\n\n        if (nextActiveItem !== this._onScrollActiveItem) {\n            this._onScrollActiveItem = nextActiveItem;\n            onScrollIndexChanged &&\n                onScrollIndexChanged(this._getDataIndex(nextActiveItem));\n        }\n\n        if (typeof onScroll === 'function' && event) {\n            onScroll(event);\n        }\n    }\n\n    _onMomentumScrollEnd(event: NativeSyntheticEvent<NativeScrollEvent>) {\n        const { autoplayDelay, onMomentumScrollEnd, onSnapToItem } = this.props;\n        const scrollOffset = event ?\n            this._getScrollOffset(event) :\n            this._currentScrollOffset;\n        const nextActiveItem = this._getActiveItem(scrollOffset);\n        const hasSnapped = this._isMultiple(\n            scrollOffset,\n            this.props.vertical ? this.props.itemHeight : this.props.itemWidth\n        );\n\n        // WARNING: everything in this condition will probably need to be called on _snapToItem as well because:\n        // 1. `onMomentumScrollEnd` won't be called if the scroll isn't animated\n        // 2. `onMomentumScrollEnd` won't be called at all on Android when scrolling programmatically\n        if (nextActiveItem !== this._activeItem) {\n            this._activeItem = nextActiveItem;\n            onSnapToItem && onSnapToItem(this._getDataIndex(nextActiveItem));\n\n            if (hasSnapped) {\n                this._repositionScroll(nextActiveItem);\n            }\n        }\n\n        onMomentumScrollEnd && onMomentumScrollEnd(event);\n\n        // The touchEnd event is buggy on Android, so this will serve as a fallback whenever needed\n        // https://github.com/facebook/react-native/issues/9439\n        if (IS_ANDROID && this._autoplay && !this._autoplaying) {\n\n            clearTimeout(this._enableAutoplayTimeout);\n            this._enableAutoplayTimeout = setTimeout(() => {\n                this.startAutoplay();\n            }, autoplayDelay);\n        }\n    }\n\n    _onLayout(event: LayoutChangeEvent) {\n        const { onLayout } = this.props;\n\n        // Prevent unneeded actions during the first 'onLayout' (triggered on init)\n        if (this._onLayoutInitDone) {\n            this._initPositionsAndInterpolators();\n            this._snapToItem(this._activeItem, false, false, true);\n        } else {\n            this._onLayoutInitDone = true;\n        }\n\n        onLayout && onLayout(event);\n    }\n\n    _snapToItem(\n        index: number,\n        animated = true,\n        fireCallback = true,\n        forceScrollTo = false\n    ) {\n        const { onSnapToItem } = this.props;\n        const itemsLength = this._getCustomDataLength();\n        const wrappedRef = this._getWrappedRef();\n\n        if (!itemsLength || !wrappedRef) {\n            return;\n        }\n\n        if (!index || index < 0) {\n            index = 0;\n        } else if (itemsLength > 0 && index >= itemsLength) {\n            index = itemsLength - 1;\n        }\n\n        if (index === this._activeItem && !forceScrollTo) {\n            return;\n        }\n\n        const offset = this._getItemScrollOffset(index);\n\n        if (offset === undefined) {\n            return;\n        }\n\n        this._scrollTo({ offset, animated });\n\n        // On both platforms, `onMomentumScrollEnd` won't be triggered if the scroll isn't animated\n        // so we need to trigger the callback manually\n        // On Android `onMomentumScrollEnd` won't be triggered when scrolling programmatically\n        // Therefore everything critical needs to be manually called here as well, even though the timing might be off\n        const requiresManualTrigger = !animated || IS_ANDROID;\n        if (requiresManualTrigger) {\n            this._activeItem = index;\n\n            if (fireCallback) {\n                onSnapToItem && onSnapToItem(this._getDataIndex(index));\n            }\n\n            // Repositioning on Android\n            if (IS_ANDROID && this._shouldRepositionScroll(index)) {\n                if (animated) {\n                    this._androidRepositioningTimeout = setTimeout(() => {\n                        // Without scroll animation, the behavior is completely buggy...\n                        this._repositionScroll(index, true);\n                    }, 400); // Approximate scroll duration on Android\n                } else {\n                    this._repositionScroll(index);\n                }\n            }\n        }\n    }\n\n    startAutoplay() {\n        const { autoplayInterval, autoplayDelay } = this.props;\n        this._autoplay = true;\n\n        if (this._autoplaying) {\n            return;\n        }\n\n        clearTimeout(this._autoplayTimeout);\n        this._autoplayTimeout = setTimeout(() => {\n            this._autoplaying = true;\n            this._autoplayInterval = setInterval(() => {\n                if (this._autoplaying) {\n                    this.snapToNext();\n                }\n            }, autoplayInterval);\n        }, autoplayDelay);\n    }\n\n    pauseAutoPlay() {\n        this._autoplaying = false;\n        clearTimeout(this._autoplayTimeout);\n        clearTimeout(this._enableAutoplayTimeout);\n        clearInterval(this._autoplayInterval);\n    }\n\n    stopAutoplay() {\n        this._autoplay = false;\n        this.pauseAutoPlay();\n    }\n\n    snapToItem(index: number, animated = true, fireCallback = true) {\n        if (!index || index < 0) {\n            index = 0;\n        }\n\n        const positionIndex = this._getPositionIndex(index);\n\n        if (positionIndex === this._activeItem) {\n            return;\n        }\n\n        this._snapToItem(positionIndex, animated, fireCallback);\n    }\n\n    snapToNext(animated = true, fireCallback = true) {\n        const itemsLength = this._getCustomDataLength();\n\n        let newIndex = this._activeItem + 1;\n        if (newIndex > itemsLength - 1) {\n            newIndex = 0;\n        }\n        this._snapToItem(newIndex, animated, fireCallback);\n    }\n\n    snapToPrev(animated = true, fireCallback = true) {\n        const itemsLength = this._getCustomDataLength();\n\n        let newIndex = this._activeItem - 1;\n        if (newIndex < 0) {\n            newIndex = itemsLength - 1;\n        }\n        this._snapToItem(newIndex, animated, fireCallback);\n    }\n\n    // https://github.com/facebook/react-native/issues/1831#issuecomment-231069668\n    triggerRenderingHack(offset = 1) {\n        this._hackActiveSlideAnimation(this._activeItem, offset);\n    }\n\n    _renderItem({ item, index }: { item: TData; index: number }) {\n        const { interpolators } = this.state;\n        const {\n            keyExtractor,\n            slideStyle\n        } = this.props;\n        const animatedValue = interpolators && interpolators[index];\n\n        if (typeof animatedValue === 'undefined') {\n            return null;\n        }\n\n        const animate = this._shouldAnimateSlides();\n        const Component = animate ? Animated.View : View;\n        const animatedStyle = animate ?\n            this._getSlideInterpolatedStyle(index, animatedValue) :\n            {};\n        const dataIndex = this._getDataIndex(index);\n\n        const mainDimension = this.props.vertical ?\n            { height: this.props.itemHeight } :\n            { width: this.props.itemWidth };\n        const specificProps = this._needsScrollView() ?\n            {\n                key: keyExtractor ?\n                    keyExtractor(item, index) :\n                    this._getKeyExtractor(item, index)\n            } :\n            {};\n\n        return (\n            <Component\n                style={[mainDimension, slideStyle, animatedStyle]}\n                pointerEvents='box-none'\n                {...specificProps}\n            >\n                {this.props.vertical ? this.props.renderItem({ item, index, dataIndex }, {\n                    scrollPosition: this._scrollPos,\n                    carouselRef: this._carouselRef,\n                    vertical: this.props.vertical,\n                    sliderHeight: this.props.sliderHeight,\n                    itemHeight: this.props.itemHeight\n                }) : this.props.renderItem({ item, index, dataIndex }, {\n                    scrollPosition: this._scrollPos,\n                    carouselRef: this._carouselRef,\n                    vertical: !!this.props.vertical,\n                    sliderWidth: this.props.sliderWidth,\n                    itemWidth: this.props.itemWidth\n                })}\n            </Component>\n        );\n    }\n\n    _getComponentOverridableProps() {\n        const { hideCarousel } = this.state;\n        const { loopClonesPerSide } = this.props;\n        const visibleItems =\n            Math.ceil(\n                this.props.vertical ?\n                    this.props.sliderHeight / this.props.itemHeight :\n                    this.props.sliderWidth / this.props.itemWidth\n            ) + 1;\n        const initialNumPerSide = this._enableLoop() ? loopClonesPerSide : 2;\n        const initialNumToRender = visibleItems + initialNumPerSide * 2;\n        const maxToRenderPerBatch = initialNumToRender + initialNumPerSide * 2;\n        const windowSize = maxToRenderPerBatch;\n\n        const specificProps = !this._needsScrollView() ?\n            {\n                initialNumToRender,\n                maxToRenderPerBatch,\n                windowSize\n                // updateCellsBatchingPeriod\n            } :\n            {};\n\n        return {\n            ...specificProps,\n            automaticallyAdjustContentInsets: false,\n            decelerationRate: 'fast' as const,\n            directionalLockEnabled: true,\n            disableScrollViewPanResponder: false, // If set to `true`, touch events will be triggered too easily\n            inverted: this._needsRTLAdaptations(),\n            overScrollMode: 'never' as const,\n            pinchGestureEnabled: false,\n            pointerEvents: hideCarousel ? 'none' as const : 'auto' as const,\n            // removeClippedSubviews: !this._needsScrollView(),\n            // renderToHardwareTextureAndroid: true,\n            scrollsToTop: false,\n            showsHorizontalScrollIndicator: false,\n            showsVerticalScrollIndicator: false\n        };\n    }\n\n    _isAllowCrossItem() {\n        // Note: Vertical pagination is not supported on Android by ( https://reactnative.dev/docs/scrollview#pagingenabled )\n        // if (this.props.pagingEnabled && IS_ANDROID && this.props.vertical) return false;\n        // For pagingEnabled and Vertical property works well in Android 0.62.2\n        return !this.props.pagingEnabled;\n    }\n\n    _getComponentStaticProps(): FlatListProps<TData> | ScrollViewProps {\n        const { hideCarousel } = this.state;\n        const {\n            activeSlideAlignment,\n            CellRendererComponent,\n            containerCustomStyle,\n            contentContainerCustomStyle,\n            firstItem,\n            getItemLayout,\n            keyExtractor,\n            style,\n            useExperimentalSnap\n        } = this.props;\n\n        const containerStyle = [\n            // { overflow: 'hidden' },\n            containerCustomStyle || style || {},\n            hideCarousel ? { opacity: 0 } : {},\n            this.props.vertical ?\n                { height: this.props.sliderHeight, flexDirection: 'column' as const } : // LTR hack; see https://github.com/facebook/react-native/issues/11960\n                // and https://github.com/facebook/react-native/issues/13100#issuecomment-328986423\n                {\n                    width: this.props.sliderWidth,\n                    flexDirection: this._needsRTLAdaptations() ? 'row-reverse' as const : 'row' as const\n                }\n        ];\n\n        const innerMarginStyle = this.props.vertical ?\n            {\n                paddingTop: this._getContainerInnerMargin(),\n                paddingBottom: this._getContainerInnerMargin(true)\n            } :\n            {\n                paddingLeft: this._getContainerInnerMargin(),\n                paddingRight: this._getContainerInnerMargin(true)\n            };\n\n        const contentContainerStyle = [\n            !useExperimentalSnap ? innerMarginStyle : {},\n            contentContainerCustomStyle || {}\n        ];\n\n        // WARNING: `snapToAlignment` won't work as intended because of the following:\n        // https://github.com/facebook/react-native/blob/d0871d0a9a373e1d3ac35da46c85c0d0e793116d/React/Views/ScrollView/RCTScrollView.m#L751-L755\n        // - Snap points will be off\n        // - Slide animations will be off\n        // - Last items won't be set as active (no `onSnapToItem` callback)\n        // Recommended only with large slides and `activeSlideAlignment` set to `start` for the time being\n        const snapProps = this._isAllowCrossItem() ? useExperimentalSnap ? {\n            // disableIntervalMomentum: true, // Slide ± one item at a time\n            snapToAlignment: activeSlideAlignment,\n            snapToInterval: this._getItemMainDimension()\n        } :\n            {\n                snapToOffsets: this._getSnapOffsets()\n            }\n            : {};\n\n        // Flatlist specifics\n        const specificProps = !this._needsScrollView() ?\n            {\n                CellRendererComponent:\n                    CellRendererComponent || this._getCellRendererComponent,\n                getItemLayout: getItemLayout || this._getItemLayout,\n                initialScrollIndex: this._getFirstItem(firstItem),\n                keyExtractor: keyExtractor || this._getKeyExtractor,\n                numColumns: 1,\n                renderItem: this._renderItem\n            } :\n            {};\n\n        return {\n            ...specificProps,\n            ...snapProps,\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            contentContainerStyle: contentContainerStyle,\n            data: this._getCustomData(),\n            horizontal: !this.props.vertical,\n            scrollEventThrottle: 1,\n            style: containerStyle,\n            onLayout: this._onLayout,\n            onMomentumScrollEnd: this._onMomentumScrollEnd,\n            onScroll: this._onScrollHandler,\n            onTouchStart: this._onTouchStart,\n            onTouchEnd: this._onTouchEnd\n        };\n    }\n\n    render() {\n        const { data, renderItem, useScrollView } = this.props;\n\n        if (!data || !renderItem) {\n            return null;\n        }\n\n        const props = {\n            ...this._getComponentOverridableProps(),\n            ...this.props,\n            ...this._getComponentStaticProps()\n        };\n\n        const ScrollViewComponent =\n            typeof useScrollView === 'function' ? useScrollView : Animated.ScrollView;\n\n        return this._needsScrollView() || !Animated.FlatList ? (\n            <ScrollViewComponent\n                ref={(c: any) => {\n                    this._carouselRef = c as ScrollView;\n                }}\n                {...props}>\n                {this._getCustomData().map((item, index) => {\n                    return this._renderItem({ item, index });\n                })}\n            </ScrollViewComponent>\n        ) : (\n            // @ts-expect-error Seems complicated to make TS 100% happy, while sharing that many things between\n            // flatlist && scrollview implementation. I'll prob try to rewrite parts of the logic to overcome that.\n            <Animated.FlatList\n                ref={(c: any) => {\n                    this._carouselRef = c as FlatList<TData>;\n                }}\n                {...props}\n            />\n        );\n    }\n}\n\nexport default Carousel;\n"],"mappings":"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"}