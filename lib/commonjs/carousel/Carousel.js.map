{"version":3,"names":["IS_ANDROID","Platform","OS","IS_RTL","I18nManager","isRTL","Carousel","React","Component","constructor","props","state","hideCarousel","apparitionDelay","interpolators","initialActiveItem","_getFirstItem","firstItem","_activeItem","_onScrollActiveItem","_previousFirstItem","_previousItemsLength","_mounted","_positions","_currentScrollOffset","_scrollEnabled","scrollEnabled","_getCellRendererComponent","bind","_getItemLayout","_getKeyExtractor","_onLayout","_onScroll","_onMomentumScrollEnd","_onTouchStart","_onTouchEnd","_renderItem","_setScrollHandler","_displayWarnings","componentDidMount","autoplay","_initPositionsAndInterpolators","_initTimeout","setTimeout","apparitionCallback","setState","startAutoplay","_needsScrollView","_firstItem","_snapToItem","_apparitionTimeout","shouldComponentUpdate","nextProps","nextState","shouldOptimizeUpdates","shallowCompare","componentDidUpdate","prevProps","itemsLength","_getCustomDataLength","nextFirstItem","nextActiveItem","hasNewSize","vertical","itemHeight","sliderHeight","itemWidth","sliderWidth","_setScrollEnabled","length","_hackActiveSlideAnimation","onScroll","componentWillUnmount","stopAutoplay","clearTimeout","_hackSlideAnimationTimeout","_enableAutoplayTimeout","_autoplayTimeout","_snapNoMomentumTimeout","_androidRepositioningTimeout","realIndex","currentIndex","_getDataIndex","currentScrollPosition","scrollEventConfig","listener","useNativeDriver","_scrollPos","Animated","Value","argMapping","nativeEvent","contentOffset","y","x","Array","isArray","_argMapping","pop","argMap","push","_onScrollHandler","event","pluginName","removedProps","console","error","forEach","removedProp","warn","useScrollView","FlatList","_shouldUseStackLayout","_shouldUseTinderLayout","_needsRTLAdaptations","_enableLoop","data","enableSnap","loop","_shouldAnimateSlides","inactiveSlideOpacity","inactiveSlideScale","scrollInterpolator","slideInterpolatedStyle","_shouldUseShiftLayout","inactiveSlideShift","layout","_shouldRepositionScroll","index","loopClonesPerSide","dataLength","_roundNumber","num","decimals","rounder","Math","pow","round","Number","EPSILON","_isMultiple","_getCustomData","previousItems","nextItems","dataMultiplier","floor","remainder","i","unshift","slice","concat","_getCustomIndex","baseDataIndexes","dataIndexes","j","_getPositionIndex","_getSnapOffsets","offset","_getItemMainDimension","map","_","_getWrappedRef","_carouselRef","scrollTo","scrollToOffset","getNode","_getScrollEnabled","wrappedRef","setNativeProps","_getItemScrollOffset","start","itemMainDimension","children","style","cellStyle","zIndex","_getScrollOffset","_getContainerInnerMargin","opposite","activeSlideAlignment","_getActiveSlideOffset","activeSlideOffset","minOffset","_getActiveItem","center","lastIndex","itemIndex","end","_getSlideInterpolatedStyle","animatedValue","layoutCardOffset","tinderAnimatedStyles","stackAnimatedStyles","shiftAnimatedStyles","defaultAnimatedStyles","_itemData","_index","interpolator","stackScrollInterpolator","tinderScrollInterpolator","inputRange","outputRange","defaultScrollInterpolator","interpolate","extrapolate","scrollValue","multiplier","scrollDelta","_scrollTo","animated","_repositionScroll","repositionTo","options","onTouchStart","_autoplaying","pauseAutoPlay","onTouchEnd","_autoplay","onScrollIndexChanged","scrollOffset","autoplayDelay","onMomentumScrollEnd","onSnapToItem","hasSnapped","onLayout","_onLayoutInitDone","fireCallback","forceScrollTo","undefined","requiresManualTrigger","autoplayInterval","_autoplayInterval","setInterval","snapToNext","clearInterval","snapToItem","positionIndex","newIndex","snapToPrev","triggerRenderingHack","item","keyExtractor","slideStyle","animate","View","animatedStyle","dataIndex","mainDimension","height","width","specificProps","key","renderItem","scrollPosition","carouselRef","_getComponentOverridableProps","visibleItems","ceil","initialNumPerSide","initialNumToRender","maxToRenderPerBatch","windowSize","automaticallyAdjustContentInsets","decelerationRate","directionalLockEnabled","disableScrollViewPanResponder","inverted","overScrollMode","pinchGestureEnabled","pointerEvents","scrollsToTop","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","_isAllowCrossItem","pagingEnabled","_getComponentStaticProps","CellRendererComponent","containerCustomStyle","contentContainerCustomStyle","getItemLayout","useExperimentalSnap","containerStyle","opacity","flexDirection","innerMarginStyle","paddingTop","paddingBottom","paddingLeft","paddingRight","contentContainerStyle","snapProps","snapToAlignment","snapToInterval","snapToOffsets","initialScrollIndex","numColumns","horizontal","scrollEventThrottle","render","ScrollViewComponent","ScrollView","c","callbackOffsetMargin","hasParallaxImages"],"sources":["Carousel.tsx"],"sourcesContent":["import React, { PropsWithChildren } from 'react';\nimport {\n    Animated,\n    FlatList,\n    I18nManager,\n    Platform,\n    ScrollView,\n    View,\n    StyleProp,\n    NativeSyntheticEvent,\n    NativeScrollEvent,\n    LayoutChangeEvent,\n    GestureResponderEvent,\n    ViewStyle,\n    FlatListProps,\n    ScrollViewProps,\n} from 'react-native';\nimport shallowCompare from 'react-addons-shallow-compare';\nimport {\n    defaultScrollInterpolator,\n    stackScrollInterpolator,\n    tinderScrollInterpolator,\n    defaultAnimatedStyles,\n    shiftAnimatedStyles,\n    stackAnimatedStyles,\n    tinderAnimatedStyles\n} from '../utils/animations';\nimport type { CarouselProps, CarouselState } from './types';\n\n// Metro doesn't support dynamic imports - i.e. require() done in the component itself\n// But at the same time the following import will fail on Snack...\n// TODO: find a way to get React Native's version without having to assume the file path\n// import RN_PACKAGE from '../../../react-native/package.json';\n\nconst IS_ANDROID = Platform.OS === 'android';\n\n// React Native automatically handles RTL layouts; unfortunately, it's buggy with horizontal ScrollView\n// See https://github.com/facebook/react-native/issues/11960\n// NOTE: the following variable is not declared in the constructor\n// otherwise it is undefined at init, which messes with custom indexes\nconst IS_RTL = I18nManager.isRTL;\n\nexport class Carousel<TData> extends React.Component<\n    CarouselProps<TData>,\n    CarouselState\n> {\n    static defaultProps = {\n        activeSlideAlignment: 'center',\n        activeSlideOffset: 20,\n        apparitionDelay: 0,\n        autoplay: false,\n        autoplayDelay: 1000,\n        autoplayInterval: 3000,\n        callbackOffsetMargin: 5,\n        containerCustomStyle: {},\n        contentContainerCustomStyle: {},\n        enableSnap: true,\n        firstItem: 0,\n        hasParallaxImages: false,\n        inactiveSlideOpacity: 0.7,\n        inactiveSlideScale: 0.9,\n        inactiveSlideShift: 0,\n        layout: 'default',\n        loop: false,\n        loopClonesPerSide: 3,\n        scrollEnabled: true,\n        slideStyle: {},\n        shouldOptimizeUpdates: true,\n        useExperimentalSnap: false,\n        pagingEnabled: false,\n        useScrollView: !Animated.FlatList\n    };\n\n    _activeItem: number;\n    _onScrollActiveItem: number;\n    _previousFirstItem: number;\n    _previousItemsLength: number;\n    _mounted: boolean;\n    _positions: { start: number; end: number }[];\n    _currentScrollOffset: number;\n    _scrollEnabled: boolean;\n\n    _initTimeout?: ReturnType<typeof setTimeout>;\n    _apparitionTimeout?: ReturnType<typeof setTimeout>;\n    _hackSlideAnimationTimeout?: ReturnType<typeof setTimeout>;\n    _enableAutoplayTimeout?: ReturnType<typeof setTimeout>;\n    _autoplayTimeout?: ReturnType<typeof setTimeout>;\n    _snapNoMomentumTimeout?: ReturnType<typeof setTimeout>;\n    _androidRepositioningTimeout?: ReturnType<typeof setTimeout>;\n    _autoplayInterval?: ReturnType<typeof setInterval>;\n\n    _scrollPos?: Animated.Value;\n\n    _onScrollHandler?: ReturnType<typeof Animated.event>;\n\n    _carouselRef: ScrollView | FlatList<TData> | null = null;\n\n    _autoplaying?: boolean;\n    _autoplay?: boolean;\n\n    _onLayoutInitDone?: boolean;\n\n    constructor(props: CarouselProps<TData>) {\n        super(props);\n\n        this.state = {\n            hideCarousel: !!props.apparitionDelay,\n            interpolators: []\n        };\n\n        // this._RNVersionCode = this._getRNVersionCode();\n\n        // The following values are not stored in the state because 'setState()' is asynchronous\n        // and this results in an absolutely crappy behavior on Android while swiping (see #156)\n        const initialActiveItem = this._getFirstItem(props.firstItem);\n        this._activeItem = initialActiveItem;\n        this._onScrollActiveItem = initialActiveItem;\n        this._previousFirstItem = initialActiveItem;\n        this._previousItemsLength = initialActiveItem;\n\n        this._mounted = false;\n        this._positions = [];\n        this._currentScrollOffset = 0; // Store ScrollView's scroll position\n        this._scrollEnabled = props.scrollEnabled !== false;\n\n        this._getCellRendererComponent = this._getCellRendererComponent.bind(this);\n        this._getItemLayout = this._getItemLayout.bind(this);\n        this._getKeyExtractor = this._getKeyExtractor.bind(this);\n        this._onLayout = this._onLayout.bind(this);\n        this._onScroll = this._onScroll.bind(this);\n        this._onMomentumScrollEnd = this._onMomentumScrollEnd.bind(this);\n        this._onTouchStart = this._onTouchStart.bind(this);\n        this._onTouchEnd = this._onTouchEnd.bind(this);\n        this._renderItem = this._renderItem.bind(this);\n\n        // WARNING: call this AFTER binding _onScroll\n        this._setScrollHandler(props);\n\n        // Display warnings\n        this._displayWarnings(props);\n    }\n\n    componentDidMount() {\n        const { apparitionDelay, autoplay, firstItem } = this.props;\n\n        this._mounted = true;\n        this._initPositionsAndInterpolators();\n\n        // Without 'requestAnimationFrame' or a `0` timeout, images will randomly not be rendered on Android...\n        this._initTimeout = setTimeout(() => {\n            if (!this._mounted) {\n                return;\n            }\n\n            const apparitionCallback = () => {\n                if (apparitionDelay) {\n                    this.setState({ hideCarousel: false });\n                }\n                if (autoplay) {\n                    this.startAutoplay();\n                }\n            };\n\n            // FlatList will use its own built-in prop `initialScrollIndex`\n            if (this._needsScrollView()) {\n                const _firstItem = this._getFirstItem(firstItem);\n                this._snapToItem(_firstItem, false, false, true);\n                // this._hackActiveSlideAnimation(_firstItem);\n            }\n\n            if (apparitionDelay) {\n                this._apparitionTimeout = setTimeout(() => {\n                    apparitionCallback();\n                }, apparitionDelay);\n            } else {\n                apparitionCallback();\n            }\n        }, 1);\n    }\n\n    shouldComponentUpdate(\n        nextProps: CarouselProps<TData>,\n        nextState: CarouselState\n    ): boolean {\n        if (this.props.shouldOptimizeUpdates === false) {\n            return true;\n        } else {\n            return shallowCompare(this, nextProps, nextState);\n        }\n    }\n\n    componentDidUpdate(prevProps: CarouselProps<TData>) {\n        const { interpolators } = this.state;\n        const {\n            firstItem,\n            scrollEnabled\n        } = this.props;\n        const itemsLength = this._getCustomDataLength(this.props);\n\n        if (!itemsLength) {\n            return;\n        }\n\n        const nextFirstItem = this._getFirstItem(firstItem, this.props);\n        let nextActiveItem =\n            typeof this._activeItem !== 'undefined' ?\n                this._activeItem :\n                nextFirstItem;\n\n        const hasNewSize = this.props.vertical !== prevProps.vertical ||\n            (\n                this.props.vertical && prevProps.vertical && (\n                    prevProps.itemHeight !== this.props.itemHeight || prevProps.sliderHeight !== this.props.sliderHeight\n                )\n            ) || (\n                !this.props.vertical && !prevProps.vertical && (\n                    prevProps.itemWidth !== this.props.itemWidth || prevProps.sliderWidth !== this.props.sliderWidth\n                )\n            );\n\n        // Prevent issues with dynamically removed items\n        if (nextActiveItem > itemsLength - 1) {\n            nextActiveItem = itemsLength - 1;\n        }\n\n        // Handle changing scrollEnabled independent of user -> carousel interaction\n        if (scrollEnabled !== prevProps.scrollEnabled) {\n            this._setScrollEnabled(scrollEnabled);\n        }\n\n        if (\n            interpolators.length !== itemsLength ||\n            hasNewSize\n        ) {\n            this._activeItem = nextActiveItem;\n            this._previousItemsLength = itemsLength;\n\n            this._initPositionsAndInterpolators(this.props);\n\n            // Handle scroll issue when dynamically removing items (see #133)\n            // This also fixes first item's active state on Android\n            // Because 'initialScrollIndex' apparently doesn't trigger scroll\n            if (this._previousItemsLength > itemsLength) {\n                this._hackActiveSlideAnimation(nextActiveItem);\n            }\n\n            if (hasNewSize) {\n                this._snapToItem(nextActiveItem, false, false, true);\n            }\n        } else if (\n            nextFirstItem !== this._previousFirstItem &&\n            nextFirstItem !== this._activeItem\n        ) {\n            this._activeItem = nextFirstItem;\n            this._previousFirstItem = nextFirstItem;\n            this._snapToItem(nextFirstItem, false, true, true);\n        }\n\n        if (this.props.onScroll !== prevProps.onScroll) {\n            this._setScrollHandler(this.props);\n        }\n    }\n\n    componentWillUnmount() {\n        this._mounted = false;\n        this.stopAutoplay();\n        clearTimeout(this._initTimeout);\n        clearTimeout(this._apparitionTimeout);\n        clearTimeout(this._hackSlideAnimationTimeout);\n        clearTimeout(this._enableAutoplayTimeout);\n        clearTimeout(this._autoplayTimeout);\n        clearTimeout(this._snapNoMomentumTimeout);\n        clearTimeout(this._androidRepositioningTimeout);\n    }\n\n    get realIndex() {\n        return this._activeItem;\n    }\n\n    get currentIndex() {\n        return this._getDataIndex(this._activeItem);\n    }\n\n    get currentScrollPosition() {\n        return this._currentScrollOffset;\n    }\n\n    _setScrollHandler(props: CarouselProps<TData>) {\n        // Native driver for scroll events\n        const scrollEventConfig = {\n            listener: this._onScroll,\n            useNativeDriver: true\n        };\n        this._scrollPos = new Animated.Value(0);\n        const argMapping = props.vertical ?\n            [{ nativeEvent: { contentOffset: { y: this._scrollPos } } }] :\n            [{ nativeEvent: { contentOffset: { x: this._scrollPos } } }];\n\n        // @ts-expect-error Let's ignore for now that trick\n        if (props.onScroll && Array.isArray(props.onScroll._argMapping)) {\n            // Because of a react-native issue https://github.com/facebook/react-native/issues/13294\n            argMapping.pop();\n            // @ts-expect-error Let's ignore for now that trick\n            const [argMap] = props.onScroll._argMapping;\n            if (argMap && argMap.nativeEvent && argMap.nativeEvent.contentOffset) {\n                // Shares the same animated value passed in props\n                this._scrollPos =\n                    argMap.nativeEvent.contentOffset.x ||\n                    argMap.nativeEvent.contentOffset.y ||\n                    this._scrollPos;\n            }\n            // @ts-expect-error Let's ignore for now that trick\n            argMapping.push(...props.onScroll._argMapping);\n        }\n        this._onScrollHandler = Animated.event<NativeScrollEvent>(\n            argMapping,\n            scrollEventConfig\n        );\n    }\n\n    // This will return a future-proof version code number compatible with semantic versioning\n    // Examples: 0.59.3 -> 5903 / 0.61.4 -> 6104 / 0.62.12 -> 6212 / 1.0.2 -> 10002\n    // _getRNVersionCode () {\n    //     const version = RN_PACKAGE && RN_PACKAGE.version;\n    //     if (!version) {\n    //         return null;\n    //     }\n    //     const versionSplit = version.split('.');\n    //     if (!versionSplit || !versionSplit.length) {\n    //         return null;\n    //     }\n    //     return versionSplit[0] * 10000 +\n    //         (typeof versionSplit[1] !== 'undefined' ? versionSplit[1] * 100 : 0) +\n    //         (typeof versionSplit[2] !== 'undefined' ? versionSplit[2] * 1 : 0);\n    // }\n\n    _displayWarnings(props: CarouselProps<TData> = this.props) {\n        const pluginName = 'rn-snap-carousel';\n        const removedProps = [\n            'activeAnimationType',\n            'activeAnimationOptions',\n            'enableMomentum',\n            'lockScrollTimeoutDuration',\n            'lockScrollWhileSnapping',\n            'onBeforeSnapToItem',\n            'swipeThreshold'\n        ] as const;\n\n        // if (this._RNVersionCode && this._RNVersionCode < 5800) {\n        //     console.error(\n        //         `${pluginName}: Version 4+ of the plugin is based on React Native props that were introduced in version 0.58. ` +\n        //         'Please downgrade to version 3.x or update your version of React Native.'\n        //     );\n        // }\n        if (!props.vertical && (!props.sliderWidth || !props.itemWidth)) {\n            console.error(\n                `${pluginName}: You need to specify both 'sliderWidth' and 'itemWidth' for horizontal carousels`\n            );\n        }\n        if (props.vertical && (!props.sliderHeight || !props.itemHeight)) {\n            console.error(\n                `${pluginName}: You need to specify both 'sliderHeight' and 'itemHeight' for vertical carousels`\n            );\n        }\n\n        removedProps.forEach((removedProp) => {\n            if (removedProp in props) {\n                console.warn(\n                    `${pluginName}: Prop ${removedProp} has been removed in version 4 of the plugin`\n                );\n            }\n        });\n    }\n\n    _needsScrollView() {\n        const { useScrollView } = this.props;\n        // Android's cell renderer is buggy and has a stange overflow\n        // TODO: a workaround might be to pass the custom animated styles directly to it\n        return IS_ANDROID ?\n            useScrollView ||\n            !Animated.FlatList ||\n            this._shouldUseStackLayout() ||\n            this._shouldUseTinderLayout() :\n            useScrollView || !Animated.FlatList;\n    }\n\n    _needsRTLAdaptations() {\n        const { vertical } = this.props;\n        return IS_RTL && IS_ANDROID && !vertical;\n    }\n\n    _enableLoop() {\n        const { data, enableSnap, loop } = this.props;\n        return enableSnap && loop && data && data.length && data.length > 1;\n    }\n\n    _shouldAnimateSlides(props: CarouselProps<TData> = this.props) {\n        const {\n            inactiveSlideOpacity,\n            inactiveSlideScale,\n            scrollInterpolator,\n            slideInterpolatedStyle\n        } = props;\n        return (\n            inactiveSlideOpacity < 1 ||\n            inactiveSlideScale < 1 ||\n            !!scrollInterpolator ||\n            !!slideInterpolatedStyle ||\n            this._shouldUseShiftLayout() ||\n            this._shouldUseStackLayout() ||\n            this._shouldUseTinderLayout()\n        );\n    }\n\n    _shouldUseShiftLayout() {\n        const { inactiveSlideShift, layout } = this.props;\n        return layout === 'default' && inactiveSlideShift !== 0;\n    }\n\n    _shouldUseStackLayout() {\n        return this.props.layout === 'stack';\n    }\n\n    _shouldUseTinderLayout() {\n        return this.props.layout === 'tinder';\n    }\n\n    _shouldRepositionScroll(index: number) {\n        const { data, enableSnap, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n        if (\n            !enableSnap ||\n            !dataLength ||\n            !this._enableLoop() ||\n            (index >= loopClonesPerSide && index < dataLength + loopClonesPerSide)\n        ) {\n            return false;\n        }\n        return true;\n    }\n\n    _roundNumber(num: number, decimals = 1) {\n        // https://stackoverflow.com/a/41716722/\n        const rounder = Math.pow(10, decimals);\n        return Math.round((num + Number.EPSILON) * rounder) / rounder;\n    }\n\n    _isMultiple(x: number, y: number) {\n        // This prevents Javascript precision issues: https://stackoverflow.com/a/58440614/\n        // Required because Android viewport size can return pretty complicated decimals numbers\n        return Math.round(Math.round(x / y) / (1 / y)) === Math.round(x);\n    }\n\n    _getCustomData(props: CarouselProps<TData> = this.props) {\n        const { data, loopClonesPerSide } = props;\n        const dataLength = data && data.length;\n\n        if (!dataLength) {\n            return [];\n        }\n\n        if (!this._enableLoop()) {\n            return data;\n        }\n\n        let previousItems = [];\n        let nextItems = [];\n\n        if (loopClonesPerSide > dataLength) {\n            const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n            const remainder = loopClonesPerSide % dataLength;\n\n            for (let i = 0; i < dataMultiplier; i++) {\n                previousItems.push(...data);\n                nextItems.push(...data);\n            }\n\n            previousItems.unshift(...data.slice(-remainder));\n            nextItems.push(...data.slice(0, remainder));\n        } else {\n            previousItems = data.slice(-loopClonesPerSide);\n            nextItems = data.slice(0, loopClonesPerSide);\n        }\n\n        return previousItems.concat(data, nextItems);\n    }\n\n    _getCustomDataLength(props: CarouselProps<TData> = this.props) {\n        const { data, loopClonesPerSide } = props;\n        const dataLength = data && data.length;\n\n        if (!dataLength) {\n            return 0;\n        }\n\n        return this._enableLoop() ? dataLength + 2 * loopClonesPerSide : dataLength;\n    }\n\n    _getCustomIndex(index: number, props: CarouselProps<TData> = this.props) {\n        const itemsLength = this._getCustomDataLength(props);\n\n        if (!itemsLength || typeof index === 'undefined') {\n            return 0;\n        }\n\n        return this._needsRTLAdaptations() ? itemsLength - index - 1 : index;\n    }\n\n    _getDataIndex(index: number) {\n        const { data, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n\n        if (!this._enableLoop() || !dataLength) {\n            return index;\n        }\n\n        if (index >= dataLength + loopClonesPerSide) {\n            return loopClonesPerSide > dataLength ?\n                (index - loopClonesPerSide) % dataLength :\n                index - dataLength - loopClonesPerSide;\n        } else if (index < loopClonesPerSide) {\n            // TODO: is there a simpler way of determining the interpolated index?\n            if (loopClonesPerSide > dataLength) {\n                const baseDataIndexes = [];\n                const dataIndexes = [];\n                const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\n                const remainder = loopClonesPerSide % dataLength;\n\n                for (let i = 0; i < dataLength; i++) {\n                    baseDataIndexes.push(i);\n                }\n\n                for (let j = 0; j < dataMultiplier; j++) {\n                    dataIndexes.push(...baseDataIndexes);\n                }\n\n                dataIndexes.unshift(...baseDataIndexes.slice(-remainder));\n                return dataIndexes[index];\n            } else {\n                return index + dataLength - loopClonesPerSide;\n            }\n        } else {\n            return index - loopClonesPerSide;\n        }\n    }\n\n    // Used with `snapToItem()` and 'PaginationDot'\n    _getPositionIndex(index: number) {\n        const { loop, loopClonesPerSide } = this.props;\n        return loop ? index + loopClonesPerSide : index;\n    }\n\n    _getSnapOffsets(props: CarouselProps<TData> = this.props) {\n        const offset = this._getItemMainDimension();\n        return [...Array(this._getCustomDataLength(props))].map((_, i) => {\n            return i * offset;\n        });\n    }\n\n    _getFirstItem(index: number, props: CarouselProps<TData> = this.props) {\n        const { loopClonesPerSide } = props;\n        const itemsLength = this._getCustomDataLength(props);\n\n        if (!itemsLength || index > itemsLength - 1 || index < 0) {\n            return 0;\n        }\n\n        return this._enableLoop() ? index + loopClonesPerSide : index;\n    }\n\n    _getWrappedRef() {\n        // Starting with RN 0.62, we should no longer call `getNode()` on the ref of an Animated component\n        if (\n            this._carouselRef &&\n            ((this._needsScrollView() &&\n                (this._carouselRef as ScrollView).scrollTo) ||\n                (!this._needsScrollView() &&\n                    (this._carouselRef as FlatList).scrollToOffset))\n        ) {\n            return this._carouselRef;\n        }\n        // https://github.com/facebook/react-native/issues/10635\n        // https://stackoverflow.com/a/48786374/8412141\n        return (\n            this._carouselRef &&\n            // @ts-expect-error This is for before 0.62\n            this._carouselRef.getNode &&\n            // @ts-expect-error This is for before 0.62\n            this._carouselRef.getNode()\n        );\n    }\n\n    _getScrollEnabled() {\n        return this._scrollEnabled;\n    }\n\n    _setScrollEnabled(scrollEnabled = true) {\n        const wrappedRef = this._getWrappedRef();\n\n        if (!wrappedRef || !wrappedRef.setNativeProps) {\n            return;\n        }\n\n        // 'setNativeProps()' is used instead of 'setState()' because the latter\n        // really takes a toll on Android behavior when momentum is disabled\n        wrappedRef.setNativeProps({ scrollEnabled });\n        this._scrollEnabled = scrollEnabled;\n    }\n\n    _getItemMainDimension() {\n        return this.props.vertical ? this.props.itemHeight : this.props.itemWidth;\n    }\n\n    _getItemScrollOffset(index: number) {\n        return (\n            this._positions && this._positions[index] && this._positions[index].start\n        );\n    }\n\n    _getItemLayout(_: TData[], index: number) {\n        const itemMainDimension = this._getItemMainDimension();\n        return {\n            index,\n            length: itemMainDimension,\n            offset: itemMainDimension * index // + this._getContainerInnerMargin()\n        };\n    }\n\n    // This will allow us to have a proper zIndex even with a FlatList\n    // https://github.com/facebook/react-native/issues/18616#issuecomment-389444165\n    _getCellRendererComponent({\n        children,\n        index,\n        style,\n        ...props\n    }: PropsWithChildren<{ index: number; style: StyleProp<ViewStyle> }>) {\n        const cellStyle = [\n            style,\n            !IS_ANDROID ? { zIndex: this._getCustomDataLength() - index } : {}\n        ];\n\n        return (\n            <View style={cellStyle} key={index} {...props}>\n                {children}\n            </View>\n        );\n    }\n\n    _getKeyExtractor(_: TData, index: number) {\n        return this._needsScrollView() ?\n            `scrollview-item-${index}` :\n            `flatlist-item-${index}`;\n    }\n\n    _getScrollOffset(event: NativeSyntheticEvent<NativeScrollEvent>) {\n        const { vertical } = this.props;\n        return (\n            (event &&\n                event.nativeEvent &&\n                event.nativeEvent.contentOffset &&\n                event.nativeEvent.contentOffset[vertical ? 'y' : 'x']) ||\n            0\n        );\n    }\n\n    _getContainerInnerMargin(opposite = false) {\n        const { activeSlideAlignment } = this.props;\n\n        if (\n            (activeSlideAlignment === 'start' && !opposite) ||\n            (activeSlideAlignment === 'end' && opposite)\n        ) {\n            return 0;\n        } else if (\n            (activeSlideAlignment === 'end' && !opposite) ||\n            (activeSlideAlignment === 'start' && opposite)\n        ) {\n            return this.props.vertical ?\n                this.props.sliderHeight - this.props.itemHeight :\n                this.props.sliderWidth - this.props.itemWidth;\n        } else {\n            return this.props.vertical ?\n                (this.props.sliderHeight - this.props.itemHeight) / 2 :\n                (this.props.sliderWidth - this.props.itemWidth) / 2;\n        }\n    }\n\n    _getActiveSlideOffset() {\n        const { activeSlideOffset } = this.props;\n        const itemMainDimension = this._getItemMainDimension();\n        const minOffset = 10;\n        // Make sure activeSlideOffset never prevents the active area from being at least 10 px wide\n        return itemMainDimension / 2 - activeSlideOffset >= minOffset ?\n            activeSlideOffset :\n            minOffset;\n    }\n\n    _getActiveItem(offset: number) {\n        const itemMainDimension = this._getItemMainDimension();\n        const center = offset + itemMainDimension / 2;\n        const activeSlideOffset = this._getActiveSlideOffset();\n        const lastIndex = this._positions.length - 1;\n        let itemIndex;\n\n        if (offset <= 0) {\n            return 0;\n        }\n\n        if (\n            this._positions[lastIndex] &&\n            offset >= this._positions[lastIndex].start\n        ) {\n            return lastIndex;\n        }\n\n        for (let i = 0; i < this._positions.length; i++) {\n            const { start, end } = this._positions[i];\n            if (\n                center + activeSlideOffset >= start &&\n                center - activeSlideOffset <= end\n            ) {\n                itemIndex = i;\n                break;\n            }\n        }\n\n        return itemIndex || 0;\n    }\n\n    _getSlideInterpolatedStyle(index: number, animatedValue: Animated.AnimatedInterpolation) {\n        const { layoutCardOffset, slideInterpolatedStyle } = this.props;\n\n        if (slideInterpolatedStyle) {\n            return slideInterpolatedStyle(index, animatedValue, this.props);\n        } else if (this._shouldUseTinderLayout()) {\n            return tinderAnimatedStyles(\n                index,\n                animatedValue,\n                this.props,\n                layoutCardOffset\n            );\n        } else if (this._shouldUseStackLayout()) {\n            return stackAnimatedStyles(\n                index,\n                animatedValue,\n                this.props,\n                layoutCardOffset\n            );\n        } else if (this._shouldUseShiftLayout()) {\n            return shiftAnimatedStyles(index, animatedValue, this.props);\n        } else {\n            return defaultAnimatedStyles(index, animatedValue, this.props);\n        }\n    }\n\n    _initPositionsAndInterpolators(props: CarouselProps<TData> = this.props) {\n        const { data, scrollInterpolator } = props;\n        const itemMainDimension = this._getItemMainDimension();\n\n        if (!data || !data.length) {\n            return;\n        }\n\n        const interpolators: Animated.AnimatedInterpolation[] = [];\n        this._positions = [];\n\n        this._getCustomData(props).forEach((_itemData, index) => {\n            const _index = this._getCustomIndex(index, props);\n            let animatedValue: Animated.AnimatedInterpolation;\n\n            this._positions[index] = {\n                start: index * itemMainDimension,\n                end: index * itemMainDimension + itemMainDimension\n            };\n\n            if (!this._shouldAnimateSlides(props) || !this._scrollPos) {\n                animatedValue = new Animated.Value(1);\n            } else {\n                let interpolator;\n\n                if (scrollInterpolator) {\n                    interpolator = scrollInterpolator(_index, props);\n                } else if (this._shouldUseStackLayout()) {\n                    interpolator = stackScrollInterpolator(_index, props);\n                } else if (this._shouldUseTinderLayout()) {\n                    interpolator = tinderScrollInterpolator(_index, props);\n                }\n\n                if (\n                    !interpolator ||\n                    !interpolator.inputRange ||\n                    !interpolator.outputRange\n                ) {\n                    interpolator = defaultScrollInterpolator(_index, props);\n                }\n\n                animatedValue = this._scrollPos.interpolate({\n                    ...interpolator,\n                    extrapolate: 'clamp'\n                });\n            }\n\n            interpolators.push(animatedValue);\n        });\n\n        this.setState({ interpolators });\n    }\n\n    _hackActiveSlideAnimation(index: number, scrollValue = 1) {\n        const offset = this._getItemScrollOffset(index);\n\n        if (!this._mounted || !this._carouselRef || typeof offset === 'undefined') {\n            return;\n        }\n\n        const multiplier = this._currentScrollOffset === 0 ? 1 : -1;\n        const scrollDelta = scrollValue * multiplier;\n\n        this._scrollTo({ offset: offset + scrollDelta, animated: false });\n\n        clearTimeout(this._hackSlideAnimationTimeout);\n        this._hackSlideAnimationTimeout = setTimeout(() => {\n            this._scrollTo({ offset, animated: false });\n        }, 1); // works randomly when set to '0'\n    }\n\n    _repositionScroll(index: number, animated = false) {\n        const { data, loopClonesPerSide } = this.props;\n        const dataLength = data && data.length;\n\n        if (typeof index === 'undefined' || !this._shouldRepositionScroll(index)) {\n            return;\n        }\n\n        let repositionTo = index;\n\n        if (index >= dataLength + loopClonesPerSide) {\n            repositionTo = index - dataLength;\n        } else if (index < loopClonesPerSide) {\n            repositionTo = index + dataLength;\n        }\n\n        this._snapToItem(repositionTo, animated, false);\n    }\n\n    _scrollTo({\n        offset,\n        index,\n        animated = true\n    }: {\n        offset: number;\n        index?: number;\n        animated: boolean;\n    }) {\n        const { vertical } = this.props;\n        const wrappedRef = this._getWrappedRef();\n        if (\n            !this._mounted ||\n            !wrappedRef ||\n            (typeof offset === 'undefined' && typeof index === 'undefined')\n        ) {\n            return;\n        }\n\n        let scrollToOffset;\n        if (typeof index !== 'undefined') {\n            scrollToOffset = this._getItemScrollOffset(index);\n        } else {\n            scrollToOffset = offset;\n        }\n\n        if (typeof scrollToOffset === 'undefined') {\n            return;\n        }\n\n        const options = this._needsScrollView() ?\n            {\n                x: vertical ? 0 : offset,\n                y: vertical ? offset : 0,\n                animated\n            } :\n            {\n                offset,\n                animated\n            };\n\n        if (this._needsScrollView()) {\n            wrappedRef.scrollTo(options);\n        } else {\n            wrappedRef.scrollToOffset(options);\n        }\n    }\n\n    _onTouchStart(event: GestureResponderEvent) {\n        const { onTouchStart } = this.props;\n\n        // `onTouchStart` is fired even when `scrollEnabled` is set to `false`\n        if (this._getScrollEnabled() !== false && this._autoplaying) {\n            this.pauseAutoPlay();\n        }\n\n        onTouchStart && onTouchStart(event);\n    }\n\n    _onTouchEnd(event: GestureResponderEvent) {\n        const { onTouchEnd } = this.props;\n\n        if (\n            this._getScrollEnabled() !== false &&\n            this._autoplay &&\n            !this._autoplaying\n        ) {\n            // This event is buggy on Android, so a fallback is provided in _onMomentumScrollEnd()\n            this.startAutoplay();\n        }\n\n        onTouchEnd && onTouchEnd(event);\n    }\n\n    _onScroll(event: NativeSyntheticEvent<NativeScrollEvent>) {\n        const { onScroll, onScrollIndexChanged } = this.props;\n        const scrollOffset = event ?\n            this._getScrollOffset(event) :\n            this._currentScrollOffset;\n        const nextActiveItem = this._getActiveItem(scrollOffset);\n\n        this._currentScrollOffset = scrollOffset;\n\n        if (nextActiveItem !== this._onScrollActiveItem) {\n            this._onScrollActiveItem = nextActiveItem;\n            onScrollIndexChanged &&\n                onScrollIndexChanged(this._getDataIndex(nextActiveItem));\n        }\n\n        if (typeof onScroll === 'function' && event) {\n            onScroll(event);\n        }\n    }\n\n    _onMomentumScrollEnd(event: NativeSyntheticEvent<NativeScrollEvent>) {\n        const { autoplayDelay, onMomentumScrollEnd, onSnapToItem } = this.props;\n        const scrollOffset = event ?\n            this._getScrollOffset(event) :\n            this._currentScrollOffset;\n        const nextActiveItem = this._getActiveItem(scrollOffset);\n        const hasSnapped = this._isMultiple(\n            scrollOffset,\n            this.props.vertical ? this.props.itemHeight : this.props.itemWidth\n        );\n\n        // WARNING: everything in this condition will probably need to be called on _snapToItem as well because:\n        // 1. `onMomentumScrollEnd` won't be called if the scroll isn't animated\n        // 2. `onMomentumScrollEnd` won't be called at all on Android when scrolling programmatically\n        if (nextActiveItem !== this._activeItem) {\n            this._activeItem = nextActiveItem;\n            onSnapToItem && onSnapToItem(this._getDataIndex(nextActiveItem));\n\n            if (hasSnapped) {\n                this._repositionScroll(nextActiveItem);\n            }\n        }\n\n        onMomentumScrollEnd && onMomentumScrollEnd(event);\n\n        // The touchEnd event is buggy on Android, so this will serve as a fallback whenever needed\n        // https://github.com/facebook/react-native/issues/9439\n        if (IS_ANDROID && this._autoplay && !this._autoplaying) {\n\n            clearTimeout(this._enableAutoplayTimeout);\n            this._enableAutoplayTimeout = setTimeout(() => {\n                this.startAutoplay();\n            }, autoplayDelay);\n        }\n    }\n\n    _onLayout(event: LayoutChangeEvent) {\n        const { onLayout } = this.props;\n\n        // Prevent unneeded actions during the first 'onLayout' (triggered on init)\n        if (this._onLayoutInitDone) {\n            this._initPositionsAndInterpolators();\n            this._snapToItem(this._activeItem, false, false, true);\n        } else {\n            this._onLayoutInitDone = true;\n        }\n\n        onLayout && onLayout(event);\n    }\n\n    _snapToItem(\n        index: number,\n        animated = true,\n        fireCallback = true,\n        forceScrollTo = false\n    ) {\n        const { onSnapToItem } = this.props;\n        const itemsLength = this._getCustomDataLength();\n        const wrappedRef = this._getWrappedRef();\n\n        if (!itemsLength || !wrappedRef) {\n            return;\n        }\n\n        if (!index || index < 0) {\n            index = 0;\n        } else if (itemsLength > 0 && index >= itemsLength) {\n            index = itemsLength - 1;\n        }\n\n        if (index === this._activeItem && !forceScrollTo) {\n            return;\n        }\n\n        const offset = this._getItemScrollOffset(index);\n\n        if (offset === undefined) {\n            return;\n        }\n\n        this._scrollTo({ offset, animated });\n\n        // On both platforms, `onMomentumScrollEnd` won't be triggered if the scroll isn't animated\n        // so we need to trigger the callback manually\n        // On Android `onMomentumScrollEnd` won't be triggered when scrolling programmatically\n        // Therefore everything critical needs to be manually called here as well, even though the timing might be off\n        const requiresManualTrigger = !animated || IS_ANDROID;\n        if (requiresManualTrigger) {\n            this._activeItem = index;\n\n            if (fireCallback) {\n                onSnapToItem && onSnapToItem(this._getDataIndex(index));\n            }\n\n            // Repositioning on Android\n            if (IS_ANDROID && this._shouldRepositionScroll(index)) {\n                if (animated) {\n                    this._androidRepositioningTimeout = setTimeout(() => {\n                        // Without scroll animation, the behavior is completely buggy...\n                        this._repositionScroll(index, true);\n                    }, 400); // Approximate scroll duration on Android\n                } else {\n                    this._repositionScroll(index);\n                }\n            }\n        }\n    }\n\n    startAutoplay() {\n        const { autoplayInterval, autoplayDelay } = this.props;\n        this._autoplay = true;\n\n        if (this._autoplaying) {\n            return;\n        }\n\n        clearTimeout(this._autoplayTimeout);\n        this._autoplayTimeout = setTimeout(() => {\n            this._autoplaying = true;\n            this._autoplayInterval = setInterval(() => {\n                if (this._autoplaying) {\n                    this.snapToNext();\n                }\n            }, autoplayInterval);\n        }, autoplayDelay);\n    }\n\n    pauseAutoPlay() {\n        this._autoplaying = false;\n        clearTimeout(this._autoplayTimeout);\n        clearTimeout(this._enableAutoplayTimeout);\n        clearInterval(this._autoplayInterval);\n    }\n\n    stopAutoplay() {\n        this._autoplay = false;\n        this.pauseAutoPlay();\n    }\n\n    snapToItem(index: number, animated = true, fireCallback = true) {\n        if (!index || index < 0) {\n            index = 0;\n        }\n\n        const positionIndex = this._getPositionIndex(index);\n\n        if (positionIndex === this._activeItem) {\n            return;\n        }\n\n        this._snapToItem(positionIndex, animated, fireCallback);\n    }\n\n    snapToNext(animated = true, fireCallback = true) {\n        const itemsLength = this._getCustomDataLength();\n\n        let newIndex = this._activeItem + 1;\n        if (newIndex > itemsLength - 1) {\n            newIndex = 0;\n        }\n        this._snapToItem(newIndex, animated, fireCallback);\n    }\n\n    snapToPrev(animated = true, fireCallback = true) {\n        const itemsLength = this._getCustomDataLength();\n\n        let newIndex = this._activeItem - 1;\n        if (newIndex < 0) {\n            newIndex = itemsLength - 1;\n        }\n        this._snapToItem(newIndex, animated, fireCallback);\n    }\n\n    // https://github.com/facebook/react-native/issues/1831#issuecomment-231069668\n    triggerRenderingHack(offset = 1) {\n        this._hackActiveSlideAnimation(this._activeItem, offset);\n    }\n\n    _renderItem({ item, index }: { item: TData; index: number }) {\n        const { interpolators } = this.state;\n        const {\n            keyExtractor,\n            slideStyle\n        } = this.props;\n        const animatedValue = interpolators && interpolators[index];\n\n        if (typeof animatedValue === 'undefined') {\n            return null;\n        }\n\n        const animate = this._shouldAnimateSlides();\n        const Component = animate ? Animated.View : View;\n        const animatedStyle = animate ?\n            this._getSlideInterpolatedStyle(index, animatedValue) :\n            {};\n        const dataIndex = this._getDataIndex(index);\n\n        const mainDimension = this.props.vertical ?\n            { height: this.props.itemHeight } :\n            { width: this.props.itemWidth };\n        const specificProps = this._needsScrollView() ?\n            {\n                key: keyExtractor ?\n                    keyExtractor(item, index) :\n                    this._getKeyExtractor(item, index)\n            } :\n            {};\n\n        return (\n            <Component\n                style={[mainDimension, slideStyle, animatedStyle]}\n                pointerEvents='box-none'\n                {...specificProps}\n            >\n                {this.props.vertical ? this.props.renderItem({ item, index, dataIndex }, {\n                    scrollPosition: this._scrollPos,\n                    carouselRef: this._carouselRef,\n                    vertical: this.props.vertical,\n                    sliderHeight: this.props.sliderHeight,\n                    itemHeight: this.props.itemHeight\n                }) : this.props.renderItem({ item, index, dataIndex }, {\n                    scrollPosition: this._scrollPos,\n                    carouselRef: this._carouselRef,\n                    vertical: !!this.props.vertical,\n                    sliderWidth: this.props.sliderWidth,\n                    itemWidth: this.props.itemWidth\n                })}\n            </Component>\n        );\n    }\n\n    _getComponentOverridableProps() {\n        const { hideCarousel } = this.state;\n        const { loopClonesPerSide } = this.props;\n        const visibleItems =\n            Math.ceil(\n                this.props.vertical ?\n                    this.props.sliderHeight / this.props.itemHeight :\n                    this.props.sliderWidth / this.props.itemWidth\n            ) + 1;\n        const initialNumPerSide = this._enableLoop() ? loopClonesPerSide : 2;\n        const initialNumToRender = visibleItems + initialNumPerSide * 2;\n        const maxToRenderPerBatch = initialNumToRender + initialNumPerSide * 2;\n        const windowSize = maxToRenderPerBatch;\n\n        const specificProps = !this._needsScrollView() ?\n            {\n                initialNumToRender,\n                maxToRenderPerBatch,\n                windowSize\n                // updateCellsBatchingPeriod\n            } :\n            {};\n\n        return {\n            ...specificProps,\n            automaticallyAdjustContentInsets: false,\n            decelerationRate: 'fast' as const,\n            directionalLockEnabled: true,\n            disableScrollViewPanResponder: false, // If set to `true`, touch events will be triggered too easily\n            inverted: this._needsRTLAdaptations(),\n            overScrollMode: 'never' as const,\n            pinchGestureEnabled: false,\n            pointerEvents: hideCarousel ? 'none' as const : 'auto' as const,\n            // removeClippedSubviews: !this._needsScrollView(),\n            // renderToHardwareTextureAndroid: true,\n            scrollsToTop: false,\n            showsHorizontalScrollIndicator: false,\n            showsVerticalScrollIndicator: false\n        };\n    }\n\n    _isAllowCrossItem() {\n        // Note: Vertical pagination is not supported on Android by ( https://reactnative.dev/docs/scrollview#pagingenabled )\n        // if (this.props.pagingEnabled && IS_ANDROID && this.props.vertical) return false;\n        // For pagingEnabled and Vertical property works well in Android 0.62.2\n        return !this.props.pagingEnabled;\n    }\n\n    _getComponentStaticProps(): FlatListProps<TData> | ScrollViewProps {\n        const { hideCarousel } = this.state;\n        const {\n            activeSlideAlignment,\n            CellRendererComponent,\n            containerCustomStyle,\n            contentContainerCustomStyle,\n            firstItem,\n            getItemLayout,\n            keyExtractor,\n            style,\n            useExperimentalSnap\n        } = this.props;\n\n        const containerStyle = [\n            // { overflow: 'hidden' },\n            containerCustomStyle || style || {},\n            hideCarousel ? { opacity: 0 } : {},\n            this.props.vertical ?\n                { height: this.props.sliderHeight, flexDirection: 'column' as const } : // LTR hack; see https://github.com/facebook/react-native/issues/11960\n                // and https://github.com/facebook/react-native/issues/13100#issuecomment-328986423\n                {\n                    width: this.props.sliderWidth,\n                    flexDirection: this._needsRTLAdaptations() ? 'row-reverse' as const : 'row' as const\n                }\n        ];\n\n        const innerMarginStyle = this.props.vertical ?\n            {\n                paddingTop: this._getContainerInnerMargin(),\n                paddingBottom: this._getContainerInnerMargin(true)\n            } :\n            {\n                paddingLeft: this._getContainerInnerMargin(),\n                paddingRight: this._getContainerInnerMargin(true)\n            };\n\n        const contentContainerStyle = [\n            !useExperimentalSnap ? innerMarginStyle : {},\n            contentContainerCustomStyle || {}\n        ];\n\n        // WARNING: `snapToAlignment` won't work as intended because of the following:\n        // https://github.com/facebook/react-native/blob/d0871d0a9a373e1d3ac35da46c85c0d0e793116d/React/Views/ScrollView/RCTScrollView.m#L751-L755\n        // - Snap points will be off\n        // - Slide animations will be off\n        // - Last items won't be set as active (no `onSnapToItem` callback)\n        // Recommended only with large slides and `activeSlideAlignment` set to `start` for the time being\n        const snapProps = this._isAllowCrossItem() ? useExperimentalSnap ? {\n            // disableIntervalMomentum: true, // Slide  one item at a time\n            snapToAlignment: activeSlideAlignment,\n            snapToInterval: this._getItemMainDimension()\n        } :\n            {\n                snapToOffsets: this._getSnapOffsets()\n            }\n            : {};\n\n        // Flatlist specifics\n        const specificProps = !this._needsScrollView() ?\n            {\n                CellRendererComponent:\n                    CellRendererComponent || this._getCellRendererComponent,\n                getItemLayout: getItemLayout || this._getItemLayout,\n                initialScrollIndex: this._getFirstItem(firstItem),\n                keyExtractor: keyExtractor || this._getKeyExtractor,\n                numColumns: 1,\n                renderItem: this._renderItem\n            } :\n            {};\n\n        return {\n            ...specificProps,\n            ...snapProps,\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            contentContainerStyle: contentContainerStyle,\n            data: this._getCustomData(),\n            horizontal: !this.props.vertical,\n            scrollEventThrottle: 1,\n            style: containerStyle,\n            onLayout: this._onLayout,\n            onMomentumScrollEnd: this._onMomentumScrollEnd,\n            onScroll: this._onScrollHandler,\n            onTouchStart: this._onTouchStart,\n            onTouchEnd: this._onTouchEnd\n        };\n    }\n\n    render() {\n        const { data, renderItem, useScrollView } = this.props;\n\n        if (!data || !renderItem) {\n            return null;\n        }\n\n        const props = {\n            ...this._getComponentOverridableProps(),\n            ...this.props,\n            ...this._getComponentStaticProps()\n        };\n\n        const ScrollViewComponent =\n            typeof useScrollView === 'function' ? useScrollView : Animated.ScrollView;\n\n        return this._needsScrollView() || !Animated.FlatList ? (\n            <ScrollViewComponent\n                ref={(c: any) => {\n                    this._carouselRef = c as ScrollView;\n                }}\n                {...props}>\n                {this._getCustomData().map((item, index) => {\n                    return this._renderItem({ item, index });\n                })}\n            </ScrollViewComponent>\n        ) : (\n            // @ts-expect-error Seems complicated to make TS 100% happy, while sharing that many things between\n            // flatlist && scrollview implementation. I'll prob try to rewrite parts of the logic to overcome that.\n            <Animated.FlatList\n                ref={(c: any) => {\n                    this._carouselRef = c as FlatList<TData>;\n                }}\n                {...props}\n            />\n        );\n    }\n}\n\nexport default Carousel;\n"],"mappings":"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"}